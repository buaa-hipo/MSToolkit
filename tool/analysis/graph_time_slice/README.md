# timeslice_analysis

The function of `timeslice_analysis` is to divide the program execution process into slices based on a given time slice size, integrate the performance trace data and communication dependency information within each time slice, and ultimately generate a sequence of spatial communication graphs. 

## usage

```shell
Read the measurement directory generated by jsirun and generate CSV files that consolidate event information based on given time slice sizes.
Usage:
  timeslice_analysis [OPTION...]

  -f, --force          Force to overwrite the output file if already exists.
  -h, --help           Print help
  -i, --input          Input measurement directory generated by jsirun
  -o, --output         Output file to store the csv outputs (default: graph)
  -d, --line_info_dump Input line info directory dumped by dwarf_line_info_dump
  -l, --interval       Time interval between two time slice (ms)
  -u, --duration       Time duration of one time slice (ms)
  -n, --dry_run        Dry run (no file output)
  -e, --edges_only     Print edge info only
  -b, --bt_only        Print backtrace info only
  -s, --filter_bt      Input backtrace filter directory
  -m, --mode           Data model (0: legacy, 1: section) (default: 1)
```

## example

Assume there is an MPI program：

```
MPI_program
├── trace      Input measurement directory generated by jsirun
└── lineinfo   Input line info directory dumped by dwarf_line_info_dump
```

Use timeslice_analysis to process:

```shell
# dump nodes (interval = 10ms  duration = 10ms)
timeslice_analysis -m 1 -i MPI_program/trace -f -o MPI_program/graph -d MPI_program/lineinfo -l 10 -u 10

# dump edges (interval = 10ms  duration = 10ms)
timeslice_analysis -m 1 -i MPI_program/trace -f -o MPI_program/graph_edge -d MPI_program/lineinfo -l 10 -u 10 -e
```

Afer timeslice analysis

```
MPI_program
├── trace      Input measurement directory generated by jsirun
├── lineinfo   Input line info directory dumped by dwarf_line_info_dump
├── graph      Output comm events csv file generated by timeslice_analysis
			   (each row contains all events information for a specific process in one time slice)
└── graph_edge Output comm dependency edge csv file generated by timeslice_analysis
			   (each row contains all comm dependency edge for a specific process in one time slice)

```
